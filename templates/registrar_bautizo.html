<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro de Bautizo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
</head>
<body class="bg-light">

<div class="container mt-4">
    <div class="row justify-content-center">
        <div class="col-12 col-lg-10">
            <div class="card shadow">
                <div class="card-header bg-primary text-white">
                    <h4 class="mb-0">
                        <i class="bi bi-water me-2"></i>Registro de Bautizo
                    </h4>
                </div>
                <div class="card-body">
                    <form id="formBautizo">
                        <div class="row">
                            <!-- Persona que se bautiza -->
                            <div class="col-12 mb-4">
                                <div class="border rounded p-3 bg-light">
                                    <h5 class="text-primary mb-3">
                                        <i class="bi bi-person-circle me-2"></i>Datos del Bautizado
                                    </h5>
                                    <div class="row">
                                        <div class="col-md-3">
                                            <label for="dniPersona" class="form-label">DNI del Bautizado *</label>
                                            <input type="text" class="form-control dni-input" id="dniPersona" 
                                                   name="dniPersona" placeholder="Ingrese DNI y presione Enter" 
                                                   maxlength="8" required>
                                        </div>
                                        <div class="col-md-9">
                                            <div id="datosPersona" class="d-none">
                                                <div class="row">
                                                    <div class="col-md-4">
                                                        <label class="form-label">Nombres</label>
                                                        <input type="text" class="form-control" id="nombresPersona" readonly>
                                                    </div>
                                                    <div class="col-md-4">
                                                        <label class="form-label">Apellido Paterno</label>
                                                        <input type="text" class="form-control" id="apellido1Persona" readonly>
                                                    </div>
                                                    <div class="col-md-4">
                                                        <label class="form-label">Apellido Materno</label>
                                                        <input type="text" class="form-control" id="apellido2Persona" readonly>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Padres -->
                            <div class="col-12 mb-4">
                                <div class="border rounded p-3 bg-light">
                                    <h5 class="text-success mb-3">
                                        <i class="bi bi-people me-2"></i>Datos de los Padres
                                    </h5>
                                    <div class="row">
                                        <!-- Padre -->
                                        <div class="col-md-6">
                                            <div class="row">
                                                <div class="col-md-4">
                                                    <label for="dniPadre" class="form-label">DNI del Padre *</label>
                                                    <input type="text" class="form-control dni-input" id="dniPadre" 
                                                           name="dniPadre" placeholder="Ingrese DNI y presione Enter" 
                                                           maxlength="8" required>
                                                </div>
                                                <div class="col-md-8">
                                                    <div id="datosPadre" class="d-none">
                                                        <div class="row">
                                                            <div class="col-12 mb-2">
                                                                <label class="form-label">Nombres</label>
                                                                <input type="text" class="form-control" id="nombresPadre" readonly>
                                                            </div>
                                                            <div class="col-6">
                                                                <label class="form-label">Apellido Paterno</label>
                                                                <input type="text" class="form-control" id="apellido1Padre" readonly>
                                                            </div>
                                                            <div class="col-6">
                                                                <label class="form-label">Apellido Materno</label>
                                                                <input type="text" class="form-control" id="apellido2Padre" readonly>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Madre -->
                                        <div class="col-md-6">
                                            <div class="row">
                                                <div class="col-md-4">
                                                    <label for="dniMadre" class="form-label">DNI de la Madre *</label>
                                                    <input type="text" class="form-control dni-input" id="dniMadre" 
                                                           name="dniMadre" placeholder="Ingrese DNI y presione Enter" 
                                                           maxlength="8" required>
                                                </div>
                                                <div class="col-md-8">
                                                    <div id="datosMadre" class="d-none">
                                                        <div class="row">
                                                            <div class="col-12 mb-2">
                                                                <label class="form-label">Nombres</label>
                                                                <input type="text" class="form-control" id="nombresMadre" readonly>
                                                            </div>
                                                            <div class="col-6">
                                                                <label class="form-label">Apellido Paterno</label>
                                                                <input type="text" class="form-control" id="apellido1Madre" readonly>
                                                            </div>
                                                            <div class="col-6">
                                                                <label class="form-label">Apellido Materno</label>
                                                                <input type="text" class="form-control" id="apellido2Madre" readonly>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Padrinos -->
                            <div class="col-12 mb-4">
                                <div class="border rounded p-3 bg-light">
                                    <h5 class="text-warning mb-3">
                                        <i class="bi bi-heart me-2"></i>Datos de los Padrinos
                                    </h5>
                                    <div class="row">
                                        <!-- Padrino -->
                                        <div class="col-md-6">
                                            <div class="row">
                                                <div class="col-md-4">
                                                    <label for="dniPadrino" class="form-label">DNI del Padrino *</label>
                                                    <input type="text" class="form-control dni-input" id="dniPadrino" 
                                                           name="dniPadrino" placeholder="Ingrese DNI y presione Enter" 
                                                           maxlength="8" required>
                                                </div>
                                                <div class="col-md-8">
                                                    <div id="datosPadrino" class="d-none">
                                                        <div class="row">
                                                            <div class="col-12 mb-2">
                                                                <label class="form-label">Nombres</label>
                                                                <input type="text" class="form-control" id="nombresPadrino" readonly>
                                                            </div>
                                                            <div class="col-6">
                                                                <label class="form-label">Apellido Paterno</label>
                                                                <input type="text" class="form-control" id="apellido1Padrino" readonly>
                                                            </div>
                                                            <div class="col-6">
                                                                <label class="form-label">Apellido Materno</label>
                                                                <input type="text" class="form-control" id="apellido2Padrino" readonly>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Madrina -->
                                        <div class="col-md-6">
                                            <div class="row">
                                                <div class="col-md-4">
                                                    <label for="dniMadrina" class="form-label">DNI de la Madrina *</label>
                                                    <input type="text" class="form-control dni-input" id="dniMadrina" 
                                                           name="dniMadrina" placeholder="Ingrese DNI y presione Enter" 
                                                           maxlength="8" required>
                                                </div>
                                                <div class="col-md-8">
                                                    <div id="datosMadrina" class="d-none">
                                                        <div class="row">
                                                            <div class="col-12 mb-2">
                                                                <label class="form-label">Nombres</label>
                                                                <input type="text" class="form-control" id="nombresMadrina" readonly>
                                                            </div>
                                                            <div class="col-6">
                                                                <label class="form-label">Apellido Paterno</label>
                                                                <input type="text" class="form-control" id="apellido1Madrina" readonly>
                                                            </div>
                                                            <div class="col-6">
                                                                <label class="form-label">Apellido Materno</label>
                                                                <input type="text" class="form-control" id="apellido2Madrina" readonly>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Datos del Bautizo -->
                            <div class="col-12 mb-4">
                                <div class="border rounded p-3 bg-light">
                                    <h5 class="text-info mb-3">
                                        <i class="bi bi-calendar-event me-2"></i>Datos del Bautizo
                                    </h5>
                                    <div class="row">
                                        <div class="col-md-3">
                                            <label for="partida" class="form-label">Número de Partida *</label>
                                            <input type="text" class="form-control" id="partida" name="partida" required>
                                        </div>
                                        <div class="col-md-3">
                                            <label for="fechaBautizo" class="form-label">Fecha del Bautizo *</label>
                                            <input type="date" class="form-control" id="fechaBautizo" name="fechaBautizo" required>
                                        </div>
                                        <div class="col-md-6">
                                            <label for="iglesia" class="form-label">Iglesia *</label>
                                            <select class="form-select" id="iglesia" name="iglesia" required>
                                                <option value="">Seleccione Iglesia</option>
                                                {% for iglesia in iglesias %}
                                                <option value="{{ iglesia.idiglesias }}">{{ iglesia.nomIglesia }}</option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                        <div class="col-md-6 mt-3">
                                            <label for="nombreIglesia" class="form-label">Año Parroquial *</label>
                                            <select class="form-select" id="anoParroquial" name="anoParroquial" required>
                                                <option value="">Seleccione Año Parroquial</option>
                                                {% for ano in anos_parroquiales %}
                                                <option value="{{ ano.idAniosParroquial }}">{{ ano.nomAnioParroquial }}</option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                        <div class="col-md-6 mt-3">
                                            <label for="sacerdote" class="form-label">Sacerdote *</label>
                                            <select class="form-select" id="sacerdote" name="sacerdote" required>
                                                <option value="">Seleccione Sacerdote</option>
                                                {% for sacerdote in sacerdotes %}
                                                <option value="{{ sacerdote.idsacerdotes }}">{{ sacerdote.nom }}</option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="text-end">
                            <button type="submit" class="btn btn-primary btn-lg">
                                <i class="bi bi-save me-2"></i>Registrar Bautizo
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal para registrar nueva persona -->
<div class="modal fade" id="modalPersona" tabindex="-1" aria-labelledby="modalPersonaLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header bg-success text-white">
                <h5 class="modal-title" id="modalPersonaLabel">
                    <i class="bi bi-person-plus me-2"></i>Registrar Nueva Persona
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="formPersona">
                    <div class="row">
                        <div class="col-md-6">
                            <label for="dniNuevo" class="form-label">DNI *</label>
                            <input type="text" class="form-control" id="dniNuevo" maxlength="8" required>
                        </div>
                        <div class="col-md-6">
                            <label for="genero" class="form-label">Género *</label>
                            <select class="form-select" id="genero" required>
                                <option value="">Seleccione</option>
                                <option value="M">Masculino</option>
                                <option value="F">Femenino</option>
                            </select>
                        </div>
                        <div class="col-12 mt-3">
                            <label for="nombres" class="form-label">Nombres *</label>
                            <input type="text" class="form-control" id="nombres" required>
                        </div>
                        <div class="col-md-6 mt-3">
                            <label for="apellido1" class="form-label">Apellido Paterno *</label>
                            <input type="text" class="form-control" id="apellido1" required>
                        </div>
                        <div class="col-md-6 mt-3">
                            <label for="apellido2" class="form-label">Apellido Materno</label>
                            <input type="text" class="form-control" id="apellido2">
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-success" onclick="guardarPersona()">
                    <i class="bi bi-save me-2"></i>Guardar Persona
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Modal de mensaje -->
<div class="modal fade" id="mensajeModal" tabindex="-1" aria-labelledby="mensajeModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="mensajeModalLabel">Resultado</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p id="mensajeContenido"></p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" onclick="cerrarModal()">Aceptar</button>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="{{ url_for('static', filename='js/bautizo.js') }}"></script>
</body>
</html>